#:include widgets.kv

<Manager>:
    MainWindow:
        name: "main"

    InputNumberManuallyScreen:
        name: 'input_number_manually'

    ProblemWindow:
        name: 'problem'

    ResultsWindow:
        name: 'results'

    JobWindow:
        name: 'job'

    SettingsWindow:
        name: 'settings'

<MainWindow>:
    Logo:
        pos_hint: {'center_x': 0.5, 'y': 0.7}

    GridLayout:
        id: search_method_layout
        rows: 1
        cols: 2
        size_hint_x: 0.8
        size_hint_y: 0.1
        pos_hint: {'center_x': 0.5, 'y': 0.6}

        GrayButton:
            id: search_by_scanning
            text: 'Scan'
            disabled: True

        GrayButton:
            id: search_by_inputting
            text: 'Input'
            disabled: False
            on_press: 
                app.root.current = 'input_number_manually'

    GrayButton:
        id: goto_settings
        text: 'Settings'
        size_hint: (0.2, 0.1)
        pos_hint: {'center_x': 0.5, 'y': 0.3}
        on_press: 
            app.root.current = 'settings'

    GrayButton:
        id: exit_button
        text: 'Exit'
        size_hint: (0.2, 0.1)
        pos_hint: {'center_x':0.5, 'y': 0.1}
        on_press: 
            app.get_running_app().stop()

<SettingsWindow>:
    BigLabel:
        id: price_strategy_label
        text: 'choose default price difference from average:'
        pos_hint: {'center_x': 0.5, 'y': 0.9}

    GridLayout:
        id: price_strategy_layout
        rows: 1
        cols: 4
        size_hint_x: 0.8
        size_hint_y: 0.1
        pos_hint: {'center_x': 0.5, 'y': 0.8}

        PriceStrategyToggleButton:
            id: set_0_percent_price_strategy
            state: 'down'
            text: '-0%'

        PriceStrategyToggleButton:
            id: set_10_percent_price_strategy
            text: '-10%'

        PriceStrategyToggleButton:
            id: set_20_percent_price_strategy
            text: '-20%'

        PriceStrategyToggleButton:
            id: set_40_percent_price_strategy
            text: '-40%'

    BigLabel:
        id: sell_strategy
        text: 'choose sell strategy'
        pos_hint: {'center_x': 0.5, 'y': 0.7}

    GridLayout:
        id: sell_strategy_layout
        rows: 2
        cols: 3
        size_hint_x: 0.7
        size_hint_y: 0.1
        pos_hint: {'center_x': 0.5, 'y': 0.6}

        BigLabel:
            id: sell_strategy_label
            text: 'Sell as:'

        SellAsToggleButton:
            id: set_sell_as_new
            text: 'used'
            state: 'down'

        SellAsToggleButton:
            id: set_sell_as_used
            text: 'new'

        BigLabel:
            id: buynow_strategy_label
            text: 'Allow Buy Now'

        BuyNowToggleButton:
            id: buynow_true
            text: 'yes'
            state: 'down'

        BuyNowToggleButton:
            id: buynow_false
            text: 'no'

    BigLabel:
        id: delivery_strategy_label
        text: 'choose delivery options'
        pos_hint: {'center_x':0.5, 'y': 0.5}

    GridLayout:
        id: delivery_strategy_layout
        rows: 3
        cols: 5
        size_hint_x: 0.8
        size_hint_y: 0.3
        pos_hint: {'center_x':0.5, 'y': 0.2}
 
        SetDeliveryCheckBox:
            id: set_parcelloker_on
            size_hint_x: 0.1

        BigLabel:
            id: parcellocker_delivery_label
            size_hint_x: 0.4
            text: 'Parcellocker'

        SetLessPriceButton:
            on_press: 
                root.change_price('parcellocker', -1)

        BigLabel:
            id: parcellocker_delivery_price
            size_hint_x: 0.4
            text: '10.00 PLN'

        SetMorePriceButton:
            on_press: 
                root.change_price('parcellocker', 1)

        SetDeliveryCheckBox:
            size_hint_x: 0.1
            id: set_courier_on

        BigLabel:
            id: courier_delivery_label
            size_hint_x: 0.4
            text: 'Courier'

        SetLessPriceButton:
            on_press: 
                root.change_price('courier', -1)

        BigLabel:
            id: courier_delivery_price
            text: '10.00 PLN'

        SetMorePriceButton:
            on_press: 
                root.change_price('courier', 1)

        SetDeliveryCheckBox:
            id: set_mail_on
            size_hint_x: 0.1

        BigLabel:
            id: mail_delivery_label
            text: 'Mail'

        SetLessPriceButton:
            on_press: 
                root.change_price('mail', -1)

        BigLabel:
            id: mail_delivery_price
            text: '10.00 PLN'

        SetMorePriceButton:
            on_press: 
                root.change_price('mail', 1)

    GrayButton:
        id: goback
        text: 'Save and Proceed'
        pos_hint: {'center_x':0.5, 'y': 0.0}
        size_hint_x: 0.2
        size_hint_y: 0.1
        on_press: 
            app.root.current = 'main'

<ResultsWindow>:
    GridLayout:
        id: results_layout
        rows: 4
        cols: 2
        size_hint_x: 0.8
        size_hint_y: 0.5
        pos_hint: {'center_x':0.5, 'y': 0.4}

        BigLabel:
            id: title_label
            text: 'title:'

        BigLabel:
            id: title_content
            text: 'jebac psy'

        BigLabel:
            id: author_label
            text: 'title:'

        BigLabel:
            id: author_content
            text: 'Pezet'

        BigLabel:
            id: avg_prices_label
            text: 'avg. price:'

        BigLabel:
            id: avg_prices_content
            text: '0.0'

        BigLabel:
            id: sales_number_label
            text: 'sold:'

        BigLabel:
            id: sales_number_content
            text: '69'

    GridLayout:
        id: buttons_layout
        rows: 1
        cols: 2
        size_hint_x: 0.8
        size_hint_y: 0.1
        pos_hint: {'center_x':0.5, 'y': 0.2}

        GrayButton:
            id: goback_button
            text: 'Go Back'
            on_press: 
                root.goback()

        GrayButton:
            id: sell_button
            text: 'Sell!'
            disabled: True  
            on_press: 
                root.sell()

<JobWindow>:
    canvas:
        Color:
            rgba: 0.0, 0.0, 0.0, 1.0
        Rectangle:
            pos: self.pos
            size: self.size

    Image:
        id: job_wip_gif
        source: 'static/wait.gif'
        anim_delay: 0.1
        anim_loop: 5
        allow_stretch: False
        size_hint_y: 0.1
        size_hint_x: 0.1
        pos_hint: {'center_x':0.5, 'center_y': 0.5}


<InputNumberManuallyScreen>:
    id: search_layout_main

    ISBNLabel:
        id: isbn_number_label
        text: '9781617293702'
        pos_hint: {'center_x': 0.5, 'y': 0.7}

    BigLabel:
        id: message_label
        text: 'type ISBN number'
        pos_hint: {'center_x': 0.5, 'y': 0.5}

    GridLayout:
        id: keyboard_input_layout
        size_hint_x: 0.8
        size_hint_y: 0.4
        pos_hint: {'center_x': 0.5, 'y': 0.1}
        rows: 4
        cols: 3

        InputNumberButton:
            text: '1'
            on_press: 
                root.input_number(1)

        InputNumberButton:
            text: '2'
            on_press: 
                root.input_number(2)

        InputNumberButton:
            text: '3'
            on_press: 
                root.input_number(3)

        InputNumberButton:
            text: '4'
            on_press: 
                root.input_number(4)

        InputNumberButton:
            text: '5'
            on_press: 
                root.input_number(5)

        InputNumberButton:
            text: '6'
            on_press: 
                root.input_number(6)

        InputNumberButton:
            text: '7'
            on_press: 
                root.input_number(7)

        InputNumberButton:
            text: '8'
            on_press: 
                root.input_number(8)

        InputNumberButton:
            text: '9'
            on_press: 
                root.input_number(9)

        InputNumberButton:
            text: 'Del'
            on_press: 
                root.delete_last_number()

        InputNumberButton:
            text: '0'
            on_press: 
                root.input_number(0)

        InputNumberButton:
            id: run
            text: 'Go!'
            disabled: False
            on_press: 
                app.root.current = 'job'

<ProblemWindow>:
    BigLabel:
        id: problem_layout_message
        text: 'Unknown poblem occured!'
        multiline: True
        pos_hint: {'center_x':0.5, 'y': 0.5}

    GrayButton:
        id: goback
        text: 'go back'
        size_hint_x: 0.5
        size_hint_y: 0.1
        pos_hint: {'center_x': 0.5, 'y': 0.1}
        disabled: False
        on_press: 
            app.root.current = 'main'
